include(conan-profile-common)

[settings]
os=Macos
os.version=11.0
arch=x86_64
compiler=apple-clang
compiler.version=17
compiler.cppstd={{ os.getenv("CXX_VERSION") }}
compiler.libcxx=libc++

[options]
minizip-ng/*:with_zlib=True
minizip-ng/*:with_libcomp=False
openvdb/*:simd=AVX
opensubdiv/*:with_metal=False
embree/*:shared=True

[buildenv]
PKG_ARCH=x86_64
# See also macos_var.cmake
MACOSX_DEPLOYMENT_TARGET=11.0

[conf]
&:tools.build:cxxflags+=["-ftree-vectorize", "-march=x86-64-v3", "-O3"]
tools.cmake.cmaketoolchain:user_toolchain+={{profile_dir}}/macos-vars-X64.cmake
openvdb/*:tools.build:cxxflags+=["-Wno-error", "-Wno-missing-template-arg-list-after-template-kw"]

# vim: ft=conf
